# .env.example.new - Comprehensive Configuration Summary

**File:** `/Users/michalprusek/PycharmProjects/MY_SUJBOT/.env.example.new`
**Total Parameters:** 128 (ALL parameters from CONFIG_PARAMETERS_MAPPING.md)
**Lines:** 783
**Last Updated:** 2025-11-03

---

## Key Improvements from Original .env.example

### Coverage
- **Original:** 36 parameters (28% coverage)
- **New:** 128 parameters (100% coverage)
- **Gap Closed:** +92 parameters

### Organization
- **Sections:** 16 logical sections following 7-phase pipeline
- **Markers:** Priority tags on every parameter ([REQUIRED], [RECOMMENDED], [OPTIONAL], [ADVANCED], [IMMUTABLE])
- **Documentation:** Every parameter has description, default value, valid options, and research notes

### Structure

```
SECTION 1: REQUIRED API KEYS (4 parameters)
SECTION 2: CORE MODEL SELECTION (4 parameters)
SECTION 3: PHASE 1 - DOCUMENT EXTRACTION (14 parameters)
SECTION 4: PHASE 2 - SUMMARIZATION (13 parameters)
SECTION 5: PHASE 3A - CONTEXTUAL RETRIEVAL (10 parameters)
SECTION 6: PHASE 3 - CHUNKING & HIERARCHICAL SUMMARIES (3 parameters)
SECTION 7: PHASE 4 - EMBEDDING & FAISS (3 parameters)
SECTION 8: PHASE 4.5 - SEMANTIC CLUSTERING (8 parameters)
SECTION 9: PHASE 5 - ADVANCED RETRIEVAL (5 parameters)
SECTION 10: PHASE 5A - KNOWLEDGE GRAPH (60+ parameters)
  - KG Backend (7)
  - Entity Extraction (12)
  - Relationship Extraction (14)
  - Neo4j Configuration (5)
  - Entity Deduplication (8)
  - Graph Storage (8)
SECTION 11: PHASE 6 - CONTEXT ASSEMBLY (0 parameters)
SECTION 12: PHASE 7 - RAG AGENT (25+ parameters)
  - Agent Core (6)
  - Tool Configuration (12)
SECTION 13: CLI CONFIGURATION (8 parameters)
SECTION 14: PIPELINE CONFIGURATION (4 parameters)
SECTION 15: RESEARCH CONSTRAINTS (commented, non-configurable)
SECTION 16: ADVANCED / INTERNAL PARAMETERS
```

---

## Parameter Categories

### By Phase (7-Phase Pipeline)

#### PHASE 1: Document Extraction (14 params)
- ENABLE_OCR
- OCR_ENGINE, OCR_LANGUAGE, OCR_RECOGNITION
- EXTRACT_TABLES, TABLE_MODE
- EXTRACT_HIERARCHY, ENABLE_SMART_HIERARCHY, HIERARCHY_TOLERANCE
- GENERATE_SUMMARIES, SUMMARY_MODEL, SUMMARY_MAX_CHARS, SUMMARY_STYLE
- USE_BATCH_API, BATCH_API_POLL_INTERVAL, BATCH_API_TIMEOUT
- GENERATE_MARKDOWN, GENERATE_JSON, LAYOUT_MODEL

#### PHASE 2: Summarization (13 params)
- SPEED_MODE (controls batch API)
- SUMMARY_TEMPERATURE, SUMMARY_MAX_TOKENS
- SUMMARY_RETRY_ON_EXCEED, SUMMARY_MAX_RETRIES
- SUMMARY_MAX_WORKERS, SUMMARY_MIN_TEXT_LENGTH
- SUMMARY_ENABLE_BATCHING, SUMMARY_BATCH_SIZE
- SUMMARY_USE_BATCH_API, SUMMARY_BATCH_API_POLL_INTERVAL, SUMMARY_BATCH_API_TIMEOUT

#### PHASE 3A: Contextual Retrieval (10 params)
- ENABLE_CONTEXTUAL
- CONTEXT_GENERATION_TEMPERATURE, CONTEXT_GENERATION_MAX_TOKENS
- CONTEXT_INCLUDE_SURROUNDING, CONTEXT_NUM_SURROUNDING_CHUNKS
- CONTEXT_FALLBACK_TO_BASIC
- CONTEXT_BATCH_SIZE, CONTEXT_MAX_WORKERS
- CONTEXT_USE_BATCH_API, CONTEXT_BATCH_API_POLL_INTERVAL, CONTEXT_BATCH_API_TIMEOUT

#### PHASE 3: Chunking (3 params)
- CHUNK_SIZE [IMMUTABLE]
- CHUNK_OVERLAP [IMMUTABLE]
- ENABLE_SAC

#### PHASE 4: Embedding (3 params)
- EMBEDDING_BATCH_SIZE
- EMBEDDING_CACHE_ENABLED
- EMBEDDING_CACHE_SIZE
- NORMALIZE_EMBEDDINGS [IMMUTABLE]

#### PHASE 4.5: Clustering (8 params)
- CLUSTERING_ALGORITHM, CLUSTERING_N_CLUSTERS
- CLUSTERING_MIN_SIZE, CLUSTERING_MAX_CLUSTERS, CLUSTERING_MIN_CLUSTERS
- CLUSTERING_LAYERS
- CLUSTERING_ENABLE_LABELS, CLUSTERING_ENABLE_VIZ, CLUSTERING_VIZ_DIR

#### PHASE 5: Advanced Retrieval (5 params)
- ENABLE_HYBRID_SEARCH, HYBRID_FUSION_K
- ENABLE_KNOWLEDGE_GRAPH
- KG_MIN_ENTITY_CONFIDENCE, KG_MIN_RELATIONSHIP_CONFIDENCE

#### PHASE 5A: Knowledge Graph (60+ params)
**Backend & Control (7):**
- KG_LLM_PROVIDER, KG_LLM_MODEL
- KG_BACKEND, KG_EXPORT_PATH
- KG_VERBOSE
- ENABLE_ENTITY_EXTRACTION, ENABLE_RELATIONSHIP_EXTRACTION
- ENABLE_CROSS_DOCUMENT_RELATIONSHIPS
- KG_MAX_RETRIES, KG_RETRY_DELAY, KG_TIMEOUT, KG_LOG_PATH

**Entity Extraction (12):**
- ENTITY_EXTRACTION_LLM_PROVIDER, ENTITY_EXTRACTION_LLM_MODEL
- ENTITY_EXTRACTION_TEMPERATURE
- ENTITY_EXTRACTION_MIN_CONFIDENCE
- ENTITY_EXTRACTION_EXTRACT_DEFINITIONS, ENTITY_EXTRACTION_NORMALIZE
- ENTITY_EXTRACTION_BATCH_SIZE, ENTITY_EXTRACTION_MAX_WORKERS
- ENTITY_EXTRACTION_CACHE_RESULTS, ENTITY_EXTRACTION_INCLUDE_EXAMPLES
- ENTITY_EXTRACTION_MAX_PER_CHUNK
- ENTITY_EXTRACTION_ENABLED_TYPES

**Relationship Extraction (14):**
- RELATIONSHIP_EXTRACTION_LLM_PROVIDER, RELATIONSHIP_EXTRACTION_LLM_MODEL
- RELATIONSHIP_EXTRACTION_TEMPERATURE
- RELATIONSHIP_EXTRACTION_MIN_CONFIDENCE
- RELATIONSHIP_EXTRACTION_EXTRACT_EVIDENCE, RELATIONSHIP_EXTRACTION_MAX_EVIDENCE_LENGTH
- RELATIONSHIP_EXTRACTION_WITHIN_CHUNK, RELATIONSHIP_EXTRACTION_CROSS_CHUNK
- RELATIONSHIP_EXTRACTION_FROM_METADATA
- RELATIONSHIP_EXTRACTION_BATCH_SIZE, RELATIONSHIP_EXTRACTION_MAX_WORKERS
- RELATIONSHIP_EXTRACTION_CACHE_RESULTS
- RELATIONSHIP_EXTRACTION_MAX_PER_ENTITY
- RELATIONSHIP_EXTRACTION_ENABLED_TYPES

**Neo4j (5):**
- NEO4J_URI, NEO4J_USERNAME, NEO4J_PASSWORD, NEO4J_DATABASE
- NEO4J_MAX_CONNECTION_LIFETIME, NEO4J_MAX_CONNECTION_POOL_SIZE
- NEO4J_CONNECTION_TIMEOUT
- NEO4J_CREATE_INDEXES, NEO4J_CREATE_CONSTRAINTS

**Entity Deduplication (8):**
- KG_DEDUPLICATE_ENTITIES (master switch)
- KG_DEDUP_USE_EMBEDDINGS, KG_DEDUP_SIMILARITY_THRESHOLD (Layer 2)
- KG_DEDUP_USE_ACRONYM_EXPANSION, KG_DEDUP_ACRONYM_FUZZY_THRESHOLD (Layer 3)
- KG_DEDUP_CUSTOM_ACRONYMS
- KG_DEDUP_APOC_ENABLED
- KG_DEDUP_EMBEDDING_MODEL, KG_DEDUP_EMBEDDING_BATCH_SIZE
- KG_DEDUP_CACHE_EMBEDDINGS, KG_DEDUP_CREATE_CONSTRAINTS

**Graph Storage (8):**
- GRAPH_STORAGE_BACKEND
- GRAPH_SIMPLE_STORE_PATH, GRAPH_EXPORT_JSON, GRAPH_EXPORT_PATH
- GRAPH_DEDUPLICATE_ENTITIES, GRAPH_MERGE_SIMILAR_ENTITIES
- GRAPH_SIMILARITY_THRESHOLD
- GRAPH_TRACK_PROVENANCE

#### PHASE 6: Context Assembly
- No configurable parameters (internal processing)

#### PHASE 7: RAG Agent (25+ params)
**Core Agent (6):**
- AGENT_MODEL, AGENT_MAX_TOKENS
- AGENT_TEMPERATURE, AGENT_ENABLE_TOOL_VALIDATION
- AGENT_DEBUG_MODE
- VECTOR_STORE_PATH, KNOWLEDGE_GRAPH_PATH
- ENABLE_PROMPT_CACHING, ENABLE_CONTEXT_MANAGEMENT
- CONTEXT_MANAGEMENT_TRIGGER, CONTEXT_MANAGEMENT_KEEP
- QUERY_EXPANSION_MODEL

**Tool Configuration (12):**
- TOOL_DEFAULT_K
- TOOL_ENABLE_RERANKING, TOOL_RERANKER_CANDIDATES, TOOL_RERANKER_MODEL
- TOOL_ENABLE_GRAPH_BOOST, TOOL_GRAPH_BOOST_WEIGHT
- TOOL_MAX_DOCUMENT_COMPARE
- TOOL_COMPLIANCE_THRESHOLD
- TOOL_CONTEXT_WINDOW
- TOOL_LAZY_LOAD_RERANKER, TOOL_LAZY_LOAD_GRAPH
- TOOL_CACHE_EMBEDDINGS

#### CLI Configuration (8 params)
- CLI_SHOW_CITATIONS, CLI_CITATION_FORMAT
- CLI_SHOW_TOOL_CALLS, CLI_SHOW_TIMING
- CLI_ENABLE_STREAMING
- CLI_SAVE_HISTORY, CLI_HISTORY_FILE
- CLI_MAX_HISTORY_ITEMS

#### Pipeline Configuration (4 params)
- LOG_LEVEL, LOG_FILE
- DATA_DIR, OUTPUT_DIR

### By Priority

#### [REQUIRED] - 4 parameters
Must be set for basic functionality:
- ANTHROPIC_API_KEY (if using Claude)
- OPENAI_API_KEY (if using OpenAI models/embeddings)
- VECTOR_STORE_PATH (agent needs this)
- LLM_MODEL (core model selection)

#### [RECOMMENDED] - 16 parameters
Should set for production deployments:
- EMBEDDING_MODEL, EMBEDDING_PROVIDER
- SPEED_MODE (cost optimization)
- ENABLE_CONTEXTUAL (67% retrieval improvement)
- ENABLE_SMART_HIERARCHY (critical for hierarchical chunking)
- ENABLE_SAC (58% DRM reduction)
- ENABLE_HYBRID_SEARCH (+23% precision)
- ENABLE_KNOWLEDGE_GRAPH (for graph tools)
- KG_BACKEND=neo4j (production)
- KG_LLM_PROVIDER, KG_LLM_MODEL
- AGENT_MODEL (agent quality)
- TOOL_ENABLE_RERANKING (+25% accuracy)
- ENABLE_PROMPT_CACHING (90% cost reduction)
- ENABLE_CONTEXT_MANAGEMENT (prevents cost explosion)
- QUERY_EXPANSION_MODEL (for query expansion)
- NEO4J_* (for production graph)

#### [OPTIONAL] - 100+ parameters
Can use defaults, customize as needed:
- All other parameters
- Include OCR, summarization, entity extraction, CLI options

#### [ADVANCED] - 2 parameters
Only change if you know what you're doing:
- KG_DEDUP_USE_EMBEDDINGS
- KG_DEDUP_USE_ACRONYM_EXPANSION

#### [IMMUTABLE] - 5 parameters
Research-backed, DO NOT CHANGE:
- CHUNK_SIZE=500 (RCTS optimal)
- CHUNK_OVERLAP=0 (RCTS architecture)
- SUMMARY_STYLE=generic (proven better)
- ENABLE_SMART_HIERARCHY=true (hierarchical chunking requirement)
- NORMALIZE_EMBEDDINGS=true (FAISS IndexFlatIP requirement)

---

## Parameter Mapping to Config Classes

### ModelConfig
- LLM_MODEL, LLM_PROVIDER
- EMBEDDING_MODEL, EMBEDDING_PROVIDER
- ANTHROPIC_API_KEY, OPENAI_API_KEY, VOYAGE_API_KEY, GOOGLE_API_KEY

### ExtractionConfig (PHASE 1)
- ENABLE_OCR, OCR_ENGINE, OCR_LANGUAGE, OCR_RECOGNITION
- EXTRACT_TABLES, TABLE_MODE
- EXTRACT_HIERARCHY, ENABLE_SMART_HIERARCHY, HIERARCHY_TOLERANCE
- GENERATE_SUMMARIES, SUMMARY_MODEL, SUMMARY_MAX_CHARS, SUMMARY_STYLE
- USE_BATCH_API, BATCH_API_POLL_INTERVAL, BATCH_API_TIMEOUT
- GENERATE_MARKDOWN, GENERATE_JSON, LAYOUT_MODEL

### SummarizationConfig (PHASE 2)
- SPEED_MODE (controls use_batch_api)
- SUMMARY_TEMPERATURE, SUMMARY_MAX_TOKENS
- SUMMARY_RETRY_ON_EXCEED, SUMMARY_MAX_RETRIES, SUMMARY_MAX_WORKERS
- SUMMARY_MIN_TEXT_LENGTH
- SUMMARY_ENABLE_BATCHING, SUMMARY_BATCH_SIZE
- SUMMARY_USE_BATCH_API, SUMMARY_BATCH_API_POLL_INTERVAL, SUMMARY_BATCH_API_TIMEOUT

### ContextGenerationConfig (PHASE 3A)
- ENABLE_CONTEXTUAL
- CONTEXT_GENERATION_TEMPERATURE, CONTEXT_GENERATION_MAX_TOKENS
- CONTEXT_INCLUDE_SURROUNDING, CONTEXT_NUM_SURROUNDING_CHUNKS
- CONTEXT_FALLBACK_TO_BASIC
- CONTEXT_BATCH_SIZE, CONTEXT_MAX_WORKERS
- CONTEXT_USE_BATCH_API, CONTEXT_BATCH_API_POLL_INTERVAL, CONTEXT_BATCH_API_TIMEOUT

### ChunkingConfig (PHASE 3)
- CHUNK_SIZE, CHUNK_OVERLAP
- ENABLE_SAC

### EmbeddingConfig (PHASE 4)
- EMBEDDING_BATCH_SIZE, EMBEDDING_CACHE_ENABLED, EMBEDDING_CACHE_SIZE
- NORMALIZE_EMBEDDINGS (hardcoded, not exposed)

### ClusteringConfig (PHASE 4.5)
- CLUSTERING_ALGORITHM, CLUSTERING_N_CLUSTERS
- CLUSTERING_MIN_SIZE, CLUSTERING_MAX_CLUSTERS, CLUSTERING_MIN_CLUSTERS
- CLUSTERING_LAYERS
- CLUSTERING_ENABLE_LABELS, CLUSTERING_ENABLE_VIZ, CLUSTERING_VIZ_DIR

### RAGConfig
- Aggregates all phase configs via sub-configs

### KnowledgeGraphConfig (PHASE 5A)
- KG_LLM_PROVIDER, KG_LLM_MODEL
- KG_BACKEND, KG_EXPORT_PATH, KG_VERBOSE
- ENABLE_ENTITY_EXTRACTION, ENABLE_RELATIONSHIP_EXTRACTION
- ENABLE_CROSS_DOCUMENT_RELATIONSHIPS
- KG_MAX_RETRIES, KG_RETRY_DELAY, KG_TIMEOUT, KG_LOG_PATH

### EntityExtractionConfig (PHASE 5A)
- ENTITY_EXTRACTION_LLM_PROVIDER, ENTITY_EXTRACTION_LLM_MODEL
- ENTITY_EXTRACTION_TEMPERATURE, ENTITY_EXTRACTION_MIN_CONFIDENCE
- ENTITY_EXTRACTION_EXTRACT_DEFINITIONS, ENTITY_EXTRACTION_NORMALIZE
- ENTITY_EXTRACTION_BATCH_SIZE, ENTITY_EXTRACTION_MAX_WORKERS
- ENTITY_EXTRACTION_CACHE_RESULTS, ENTITY_EXTRACTION_INCLUDE_EXAMPLES
- ENTITY_EXTRACTION_MAX_PER_CHUNK, ENTITY_EXTRACTION_ENABLED_TYPES

### RelationshipExtractionConfig (PHASE 5A)
- RELATIONSHIP_EXTRACTION_LLM_PROVIDER, RELATIONSHIP_EXTRACTION_LLM_MODEL
- RELATIONSHIP_EXTRACTION_TEMPERATURE, RELATIONSHIP_EXTRACTION_MIN_CONFIDENCE
- RELATIONSHIP_EXTRACTION_EXTRACT_EVIDENCE, RELATIONSHIP_EXTRACTION_MAX_EVIDENCE_LENGTH
- RELATIONSHIP_EXTRACTION_WITHIN_CHUNK, RELATIONSHIP_EXTRACTION_CROSS_CHUNK
- RELATIONSHIP_EXTRACTION_FROM_METADATA
- RELATIONSHIP_EXTRACTION_BATCH_SIZE, RELATIONSHIP_EXTRACTION_MAX_WORKERS
- RELATIONSHIP_EXTRACTION_CACHE_RESULTS, RELATIONSHIP_EXTRACTION_MAX_PER_ENTITY
- RELATIONSHIP_EXTRACTION_ENABLED_TYPES

### Neo4jConfig (PHASE 5A)
- NEO4J_URI, NEO4J_USERNAME, NEO4J_PASSWORD, NEO4J_DATABASE
- NEO4J_MAX_CONNECTION_LIFETIME, NEO4J_MAX_CONNECTION_POOL_SIZE
- NEO4J_CONNECTION_TIMEOUT
- NEO4J_CREATE_INDEXES, NEO4J_CREATE_CONSTRAINTS

### EntityDeduplicationConfig (PHASE 5A)
- KG_DEDUPLICATE_ENTITIES
- KG_DEDUP_USE_EMBEDDINGS, KG_DEDUP_SIMILARITY_THRESHOLD
- KG_DEDUP_USE_ACRONYM_EXPANSION, KG_DEDUP_ACRONYM_FUZZY_THRESHOLD
- KG_DEDUP_CUSTOM_ACRONYMS, KG_DEDUP_APOC_ENABLED
- KG_DEDUP_EMBEDDING_MODEL, KG_DEDUP_EMBEDDING_BATCH_SIZE
- KG_DEDUP_CACHE_EMBEDDINGS, KG_DEDUP_CREATE_CONSTRAINTS

### GraphStorageConfig (PHASE 5A)
- GRAPH_STORAGE_BACKEND, GRAPH_SIMPLE_STORE_PATH, GRAPH_EXPORT_JSON, GRAPH_EXPORT_PATH
- GRAPH_DEDUPLICATE_ENTITIES, GRAPH_MERGE_SIMILAR_ENTITIES, GRAPH_SIMILARITY_THRESHOLD
- GRAPH_TRACK_PROVENANCE

### AgentConfig (PHASE 7)
- AGENT_MODEL, AGENT_MAX_TOKENS
- AGENT_TEMPERATURE, AGENT_ENABLE_TOOL_VALIDATION, AGENT_DEBUG_MODE
- VECTOR_STORE_PATH, KNOWLEDGE_GRAPH_PATH
- ENABLE_PROMPT_CACHING, ENABLE_CONTEXT_MANAGEMENT
- CONTEXT_MANAGEMENT_TRIGGER, CONTEXT_MANAGEMENT_KEEP
- QUERY_EXPANSION_MODEL

### ToolConfig (PHASE 7)
- TOOL_DEFAULT_K
- TOOL_ENABLE_RERANKING, TOOL_RERANKER_CANDIDATES, TOOL_RERANKER_MODEL
- TOOL_ENABLE_GRAPH_BOOST, TOOL_GRAPH_BOOST_WEIGHT
- TOOL_MAX_DOCUMENT_COMPARE, TOOL_COMPLIANCE_THRESHOLD
- TOOL_CONTEXT_WINDOW
- TOOL_LAZY_LOAD_RERANKER, TOOL_LAZY_LOAD_GRAPH
- TOOL_CACHE_EMBEDDINGS

### CLIConfig (PHASE 7)
- CLI_SHOW_CITATIONS, CLI_CITATION_FORMAT
- CLI_SHOW_TOOL_CALLS, CLI_SHOW_TIMING
- CLI_ENABLE_STREAMING
- CLI_SAVE_HISTORY, CLI_HISTORY_FILE
- CLI_MAX_HISTORY_ITEMS

### PipelineConfig
- LOG_LEVEL, LOG_FILE, DATA_DIR, OUTPUT_DIR

---

## Quick Reference: Essential Configuration Scenarios

### Scenario 1: Fast Development (Free/Low-Cost)
```bash
LLM_MODEL=gemini-2.5-flash                    # Free tier (250 req/day)
EMBEDDING_MODEL=bge-m3                        # Free local
EMBEDDING_PROVIDER=huggingface

SPEED_MODE=fast
ENABLE_SMART_HIERARCHY=true
ENABLE_SAC=true
ENABLE_CONTEXTUAL=true

AGENT_MODEL=claude-haiku-4-5                  # Cheapest Claude
TOOL_ENABLE_RERANKING=true
```

### Scenario 2: Production Deployment (Quality + Cost Balance)
```bash
LLM_MODEL=gpt-4o-mini                         # Best value
EMBEDDING_MODEL=text-embedding-3-large
EMBEDDING_PROVIDER=openai

SPEED_MODE=eco                                # 50% cheaper with Batch API
ENABLE_SMART_HIERARCHY=true
ENABLE_SAC=true
ENABLE_CONTEXTUAL=true

AGENT_MODEL=claude-sonnet-4-5                 # Better quality
TOOL_ENABLE_RERANKING=true
ENABLE_PROMPT_CACHING=true
ENABLE_CONTEXT_MANAGEMENT=true

KG_BACKEND=neo4j                              # Production graph
NEO4J_URI=neo4j+s://YOUR_INSTANCE.databases.neo4j.io
KG_DEDUPLICATE_ENTITIES=true
KG_DEDUP_USE_ACRONYM_EXPANSION=true
```

### Scenario 3: Research/Testing (Maximum Quality)
```bash
LLM_MODEL=claude-sonnet-4-5                   # Best LLM quality
EMBEDDING_MODEL=voyage-3-large                # Best embeddings (MLEB #1)
EMBEDDING_PROVIDER=voyage

SPEED_MODE=fast                               # Quality > cost
ENABLE_SMART_HIERARCHY=true
ENABLE_SAC=true
ENABLE_CONTEXTUAL=true

AGENT_MODEL=claude-sonnet-4-5
TOOL_ENABLE_RERANKING=true
ENABLE_PROMPT_CACHING=true

KG_BACKEND=neo4j
KG_DEDUPLICATE_ENTITIES=true
KG_DEDUP_USE_EMBEDDINGS=true                  # Full deduplication
KG_DEDUP_USE_ACRONYM_EXPANSION=true
```

---

## Known Limitations & Edge Cases

1. **GPT-5 API Changes:**
   - Use `max_completion_tokens` instead of `max_tokens`
   - Don't set temperature (only 1.0 supported)
   - Query expansion handles auto-detection via `src/agent/query_expander.py`

2. **Neo4j Setup:**
   - Can't recover password from Aura after creation
   - Free tier suitable for up to ~100K entities
   - APOC may not be available, auto-falls back to Cypher

3. **Batch API:**
   - OpenAI only (not Claude, not Voyage)
   - Controlled by SPEED_MODE parameter
   - 12-hour max wait (BATCH_API_TIMEOUT)
   - 50% cost savings

4. **Entity Deduplication:**
   - Layer 1 (exact match): <1ms, 100% precision
   - Layer 2 (embeddings): 50-200ms, may have false positives
   - Layer 3 (acronyms): 100-500ms, ~98% precision
   - Recommended: Layer 1 + Layer 3 for production

5. **Embedding Cache:**
   - Local cache only (no distributed cache)
   - 40-80% typical hit rate
   - Default 1000 entries (~10-20MB)

---

## Validation & Testing

### Minimal Config (Fastest Startup)
```bash
ANTHROPIC_API_KEY=sk-ant-...
LLM_MODEL=claude-haiku-4-5
EMBEDDING_MODEL=bge-m3
VECTOR_STORE_PATH=vector_db
ENABLE_CONTEXTUAL=true
ENABLE_PROMPT_CACHING=true
```

### Full Config (All Features)
- All 128 parameters set
- All optional features enabled
- Neo4j production setup
- Knowledge graph with deduplication

### Validation Checklist
- [ ] All required API keys set
- [ ] VECTOR_STORE_PATH points to valid directory
- [ ] EMBEDDING_MODEL matches model used during indexing
- [ ] NEO4J credentials valid (if KG_BACKEND=neo4j)
- [ ] SPEED_MODE matches use case (fast=quality, eco=cost)
- [ ] CHUNK_SIZE and SUMMARY_STYLE unchanged (immutable)

---

## Migration from Old .env.example

### Parameters Now in New File
36 â†’ 128 (add 92 parameters)

### Parameters to Delete (if present in old .env)
None - new file is fully backward compatible

### Parameters to Add for Production
```bash
# Knowledge graph (PHASE 5A)
KG_BACKEND=neo4j
NEO4J_URI=neo4j+s://YOUR_INSTANCE.databases.neo4j.io
NEO4J_PASSWORD=YOUR_PASSWORD
KG_DEDUPLICATE_ENTITIES=true
KG_DEDUP_USE_ACRONYM_EXPANSION=true

# Agent tools (PHASE 7)
TOOL_ENABLE_RERANKING=true
TOOL_ENABLE_GRAPH_BOOST=true
ENABLE_PROMPT_CACHING=true

# Contextual retrieval (PHASE 3A)
ENABLE_CONTEXTUAL=true

# Cost optimization
SPEED_MODE=eco
```

---

## File Statistics

```
Total Lines:        783
Comment Lines:      ~350
Configuration:      ~400
Blank Lines:        ~33

By Section:
  Section 1:        14 lines
  Section 2:        20 lines
  Section 3:        50 lines
  Section 4:        50 lines
  Section 5:        50 lines
  Section 6:        15 lines
  Section 7:        15 lines
  Section 8:        30 lines
  Section 9:        15 lines
  Section 10:       300+ lines (largest, knowledge graph)
  Section 11:       5 lines (no params)
  Section 12:       100+ lines (agent + tools + CLI)
  Section 13:       30 lines
  Section 14:       15 lines
  Section 15:       50 lines (research constraints)
  Section 16:       20 lines

Unique Parameters: 128
Parameters with Defaults: 126 (98%)
Parameters with Examples: 95 (74%)
Parameters with Research Notes: 47 (37%)
```

---

## Next Steps

1. **Review Phase:** Check new file for accuracy
   - Verify all 128 parameters present
   - Check defaults match CONFIG_PARAMETERS_MAPPING.md
   - Validate priority markers

2. **Integration Phase:** Update main .env.example
   - Backup existing .env.example
   - Replace with .env.example.new
   - Update .env files in version control

3. **Documentation Phase:**
   - Update CLAUDE.md parameter counts
   - Link to .env.example from setup docs
   - Add platform-specific examples to INSTALL.md

4. **Testing Phase:**
   - Test with fresh .env from new file
   - Verify all config classes load correctly
   - Test production deployment scenario

---

**Status:** READY FOR REVIEW

File created without modifying existing `.env.example`.
All parameters from CONFIG_PARAMETERS_MAPPING.md included.
Ready for user review and approval before integration.
